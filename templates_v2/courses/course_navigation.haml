- load i18n

%script
  $('body').addClass("noAppHeader");

.container.mainTopHeader
  .row
    .col
      .courseMainHeader
        %a.go-to-courses{:href => "/courses"}
          %h1= active_course.name
          %span.homeBtn
            %i.material-icons
              home
        .courseNavWrap.clearfix
          .pn-ProductNav_Wrapper.clearfix
            %nav#pnProductNav.pn-ProductNav.clearfix{:data-overflowing => "none"}
              .navWrapper
                #pnProductNavContents.mainNav.pn-ProductNav_Contents
                  %ul
                    %li{"class": "{% ifequal request.resolver_match.url_name 'course_landing_page' %}active{% endifequal %}"}
                      %a.ome.dome-c.nav-link.pn-ProductNav_Link{"href": "/courses/#{active_course.id}"}
                        {% trans "Overview" %}

                    %li.hasDropdown{"class": "{% if request.resolver_match.url_name == 'course_resources' or request.resolver_match.url_name == 'course_news' or request.resolver_match.url_name == 'course_overview' %}active{% endif %}"}
                      %a.ome.dome-c.nav-link.pn-ProductNav_Link.dropdown-toggle{:data-toggle => "dropdown", :href => "#"}
                        %span
                          {% trans "Course Materials" %}
                      .dropdown-menu.course-materials{:class => "{% if LANGUAGE_BIDI %}dropdown-menu-left{% else %}dropdown-menu-right{% endif %}"}
                        %a.ome.dome-c.dropdown-item{:href => "/courses/#{active_course.id}/announcements"}
                          {% trans "Announcements" %}
                          - if request.resolver_match.url_name == 'course_news'
                            %span.bookmark.secondary
                              %svg{:height => "100%", :preserveaspectratio => "none", :viewbox => "0 0 20 100", :width => "100%"}
                                %path{:d => "M5.90639e-13 0L10 0L20 50L10 100L5.90639e-13 100L5.90639e-13 0Z", :vector-effect => "non-scaling-stroke"}
                        %a.dropdown-item{:href => "/courses/#{active_course.id}/overview"}
                          {% trans "Course Overview" %}
                          - if request.resolver_match.url_name == 'course_overview'
                            %span.bookmark.secondary
                              %svg{:height => "100%", :preserveaspectratio => "none", :viewbox => "0 0 20 100", :width => "100%"}
                                %path{:d => "M5.90639e-13 0L10 0L20 50L10 100L5.90639e-13 100L5.90639e-13 0Z", :vector-effect => "non-scaling-stroke"}
                        - if feature_flags.resources
                          %a.ome.dome-c.dropdown-item{:href => "/courses/#{active_course.id}/resources"}
                            {% trans "Resources" %}
                            - if request.resolver_match.url_name == 'course_resources'
                              %span.bookmark.secondary
                                %svg{:height => "100%", :preserveaspectratio => "none", :viewbox => "0 0 20 100", :width => "100%"}
                                  %path{:d => "M5.90639e-13 0L10 0L20 50L10 100L5.90639e-13 100L5.90639e-13 0Z", :vector-effect => "non-scaling-stroke"}
                    - if feature_flags.discussions
                      %li{"class": "{% ifequal request.resolver_match.url_name 'course_discussion' %}active{% endifequal %}"}
                        %a.ome.dome-c.nav-link.pn-ProductNav_Link{"href": "/courses/#{active_course.id}/discussion"}
                          {% trans "Discussion" %}
                    - if feature_flags.group_work
                      %li{"class": "{% if request.resolver_match.url_name == 'user_course_group_work' or request.resolver_match.url_name == 'workgroup_course_group_work' %}active{% endif %}"}
                        %a.ome.dome-c.nav-link.pn-ProductNav_Link{"href": "/courses/#{active_course.id}/group_work"}
                          {% trans "Group work" %}
                    - if feature_flags.progress_page
                      %li{"class": "{% ifequal request.resolver_match.url_name 'course_progress' %}active{% endifequal %}"}
                        %a.ome.dome-c.nav-link.pn-ProductNav_Link{"href": "/courses/#{active_course.id}/progress"}
                          {% trans "My Progress" %}
                    - if feature_flags.leaderboard
                      %li{"class": "{% ifequal request.resolver_match.url_name 'course_cohort' %}active{% endifequal %}"}
                        %a.ome.dome-c.nav-link.pn-ProductNav_Link{"href": "/courses/#{active_course.id}/cohort"}
                          {% trans "Leaderboard" %}
                    - if feature_flags.notifications
                      %li.notifications.hasDropdown
                        %a.ome.dome-c.nav-link.pn-ProductNav_Link.dropdown-toggle{:data-toggle => "dropdown", :href => "#"}
                          %span
                            {% trans "Notifications" %}
                          %span.xns-counter
                        %a.xns-icon
                        .dropdown-menu.xns-pane.notification{:class => "{% if LANGUAGE_BIDI %}dropdown-menu-right{% else %}dropdown-menu-left{% endif %}"}
                          - include "django/notifications_widget.html"
                  %span#pnIndicator.pn-ProductNav_Indicator{:style => "transform: translateX(0px) scaleX(0.672); background-color: rgb(46, 45, 57);"}
            %button#pnAdvancerLeft.pn-Advancer.pn-Advancer_Left{"type": "button"}
              %i.material-icons
                keyboard_arrow_left
            %button#pnAdvancerRight.pn-Advancer.pn-Advancer_Right{:type => "button"}
              %i.material-icons
                keyboard_arrow_right

  %script
    var element = $("div.mainNav li.active a.nav-link");
    $(element).on("click", function(){
      if($(window).width() < 992)
        this.scrollIntoView();
    });

    var language_dir = $('html').attr('dir');
    if(language_dir == 'rtl'){
      $("button#pnAdvancerLeft").addClass("active");
      $("button#pnAdvancerRight").removeClass("active");
    }
    else{
      $("button#pnAdvancerRight").addClass("active");
      $("button#pnAdvancerLeft").removeClass("active");
    }
