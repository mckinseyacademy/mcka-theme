- extends "layout.haml"
- load staticfiles
- load i18n

- block page_title
  %title
    = program.display_name
    {% trans " | Courses | McKinsey Academy" %}

- block content
  %script
    $(document).ready(function () {
      $('body').addClass("courselandingView");
    });
  .container.courseLanding
    .row
      .col
        .courseMainHeader
          %h1
            = course.name
            %a.backBtn
              %i.material-icons
                keyboard_arrow_left
          - include "courses/content_page/course_tabs.haml"
        - if feature_flags.proficiency or feature_flags.progress or feature_flags.discussions
          .contentCard.progressWidgets.clearfix
            #course-statistics
              - include "courses/content_page/course_statistics.haml"
        - include "courses/content_page/course_menu.haml"
        - if course.ended
          - include "courses/content_page/course_final_grade.haml"
        - else
          - if discover_flag
            - include "courses/content_page/course_discover.haml"

            %blockquote.courseLanding.text-center
              %p
                - if quote.body
                  = quote.body
              %span.author
                - if quote.byline
                  = quote.byline

        - include "marketing/app_link_popup.haml"

      - block js_snippets
        %script{src: "{% static 'js/app_link_popup.js' %}"}

      - block heap_events
        %script
          if ('{{user.id}}') {
              heap.identify('{{user.id}}');
          }
          if ('{{client_id}}') {
               heap.addUserProperties({CLIENT_ID: '{{client_id}}'});
          }
          if ('{{course.id}}' && '{{course.name}}') {
           heap.track('COURSE_VISITED', {COURSE_ID: '{{course.id}}', COURSE_NAME: '{{course.name}}', USER_ID: '{{user.id}}'});
          }
