- extends "layout.haml"
- load staticfiles
- block page_title
  %title
    = program.display_name
    = _(" | Learner Dashboard | McKinsey Academy")
- block header
  - include 'courses/course_learner_dashboard_header.haml'
- block content
  - include 'courses/course_learner_dashboard_branding.haml'

  #home-courses
    .row
      .large-8.columns.dash-programs
        %h3{style: "color:#{learner_dashboard.title_color}"}= learner_dashboard.title
        %p{style: "color:#{learner_dashboard.description_color}"}= learner_dashboard.description
        .row
          -for tile in learner_dashboard_tiles
            .learner-program
              -if bookmark.tile.id == tile.id
                %i.bookmark{class: "fa fa-bookmark fa-2x"}
              .panel.panel-program{style: "{% if tile.background_image %} background-image: url(/company_images/#{tile.background_image}); background-size:100% 100%;{% else %} background-color: #{tile.tile_background_color};{% endif %}"}
                .sub-1{style: "color: #{tile.label_color};"}
                  -if tile.label
                    #{tile.label}
                  -else
                    #{tile.get_tile_type_display}
                -if bookmark.tile.id == tile.id and bookmark.lesson_link
                  %a.last_visited{href: "#{bookmark.lesson_link}", onclick: "ga('send', 'event', 'Outbound Link', 'click', 'TileID: #{tile.id}, TileName: #{tile.title}, UserID: #{request.user.id}')", target:"{% if tile.get_tile_type_display == 'Article' %}_blank{% else %}_self{% endif %}", 'data-tile-id': "#{tile.id}"}
                    %blockquote.user-quote{style: "color: #{tile.title_color};"}= tile.title
                -else
                  %a.last_visited{href: "{% if tile.get_tile_type_display == 'Lesson' %} #{tile.link}/#{tile.id} {%else%} #{tile.link} {%endif%}", onclick: "ga('send', 'event', 'Outbound Link', 'click', 'TileID: #{tile.id}, TileName: #{tile.title}, UserID: #{request.user.id}')", target:"{% if tile.get_tile_type_display == 'Article' %}_blank{% else %}_self{% endif %}", 'data-tile-id': "#{tile.id}"}
                    %blockquote.user-quote{style: "color: #{tile.title_color};"}= tile.title
                .label-3{style: "color: #{tile.note_color};"}= tile.note
      .large-4.columns.dash-widget{style: "{% if branding and branding.discover_rule_color %} border-color:#{branding.discover_rule_color}{% endif %}"}
        %h5.label-4{style: "{% if branding and branding.discover_title_color %} color: #{branding.discover_title_color};{% endif %}"} FOR DISCOVERY
        -for item in discovery_items
          .learner-info
            -if item.link
              -if item.title
                %a{href:"#{item.link}", onclick: "ga('send', 'event', 'Outbound Link', 'click', 'DiscName: #{item.title}, UserID: #{request.user}')", target: "_blank"}
                  %p{style: "{% if branding and branding.discover_title_color %} color: #{branding.discover_title_color};{% endif %}"}= item.title
              -if item.author
                %a{href:"#{item.link}", onclick: "ga('send', 'event', 'Outbound Link', 'click', 'DiscName: #{item.title}, UserID: #{request.user}')", target: "_blank"}
                  %h5
                  %span{style: "{% if branding and branding.discover_author_color %} color: #{branding.discover_author_color};{% endif %}"}= item.author
            -else
              -if item.title
                %p{style: "{% if branding and branding.discover_title_color %} color: #{branding.discover_title_color};{% endif %}"}= item.title
              -if item.author
                %h5
                %span{style: "{% if branding and branding.discover_author_color %} color: #{branding.discover_author_color};{% endif %}"}= item.author

- block footer

- block js_snippets
  %script{src: "{% static 'js/course_contact_modal.js' %}"}
  %script{src: "{% static 'js/tile_id_to_view.js' %}"}
