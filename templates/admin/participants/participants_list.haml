- extends "admin/admin_layout.haml"

- block content
  #mainParticipantsWrapper
    #participantsAddWrapper
      %input.button.small.radius.menuButton{:type => "button", :value => "Add New Participant"}
      %input.button.small.radius.menuButton{:type => "button", :value => "Import from CSV", 'data-reveal-id': 'import_from_csv'}
      %input.button.small.radius.secondary.menuButton{:type => "button", :value => "CSV Template", 'data-reveal-id': 'download_csv_template'}
    %hr
    #participantsSearchWrapper
      .row
        .large-4.columns
          %input{:placeholder => 'Company', :type => 'text', :name => 'company', :onkeyup => 'searchParticipantList()', :class => 'clearableParticipantsList'}
        .large-4.columns
          %input{:placeholder => 'Name', :type => 'text', :name => 'name', :onkeyup => 'searchParticipantList()', :class => 'clearableParticipantsList'}
        .large-4.columns
          %input{:placeholder => 'Email', :type => 'text', :name => 'custom_email', :onkeyup => 'searchParticipantList()', :class => 'clearableParticipantsList'}
    #participantsListViewGridBlock

    #download_csv_template.reveal-modal.small{'data-reveal': None}
      .close-reveal-modal
        %i.fa.fa-times-circle
      %h2 CSV Template and Formatting
      %p Download the CSV template below to import users. All fields in the template are required. Note that you must add users to preexisting companies and courses.
      .button-wrapper
        %a.button.small.radius.menuButton{:type => "button", :value => "Download Template", :href => '/static/docs/participant-onboarding-template.csv', :target => '_blank'}
          Download Template
        %a.button.small.radius.menuButton.close-reveal-modal.close-modal-inline{:type => "button", :value => "Cancel"}
          Cancel

    #import_from_csv.reveal-modal.big{'data-reveal': None}
      .close-reveal-modal
        %i.fa.fa-times-circle
      %h2 Import Participants from CSV
      %hr
      .bottomPadding
        %p Optional explanatory text. Lorem ipsum dolor sit amet, consectetur adipis. 
          %a.modalLinks{:href => "#", 'data-reveal-id': 'download_csv_template'} CSV Template
      .admin-form

        %form{action: "/admin/api/participants/import_participants", method: "POST", enctype: "multipart/form-data", :class => "dropzone", :id => 'participantsCsvUpload'}

        %form{action: "/admin/api/participants/import_participants", method: "POST", enctype: "multipart/form-data"}
          - csrf_token
          = form

          .error
            - if error
              = error

          .upload_stats
          #enroll-error-list
          
          .button-wrapper.topPadding
            %input.button.radius.small{type: "submit", value: "Add Participants", disabled: "disabled", id: ''}
            %a.modalLinks.leftPadding.close-reveal-modal.close-modal-inline{:href => '#'} Cancel

    #confirmation_screen.reveal-modal.big{'data-reveal': None, 'data-task-key': None, 'data-uploaded': None}   
      .close-reveal-modal
        %i.fa.fa-times-circle
      %h2.upload_message
      %hr

      %p You can download the activation links now, or from the participant profiles at any time.
      %br
      %a.download_activation{:href => '/admin/api/participants/import_participants/download_activation_links/?task_key=', :target => '_self'}> Download Activation Links

      .button-wrapper.topPadding
        %a.button.small.radius.menuButton.close-reveal-modal.close-modal-inline{:type => "button", :value => "I'm Done"} 
          I'm Done
