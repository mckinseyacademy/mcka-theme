- extends "admin/admin_layout.haml"
- load staticfiles

- block content
  .row
    .header
      %h1
        = client.display_name
      .company-image
        %img{src: "#{company_image}"}
        %a#edit-company-image{"data-reveal-id": "edit-company-image-modal", "data-reveal-ajax": "true", 'href': "/admin/clients/#{client.id}/change_company_image"}
          change photo
    %hr
    %ul.courses-tiles
      -for course in courses
        %li.course-tile
          .course-image{'style': 'background: #3384CA url(#{course.course_image_url}) no-repeat 50% 50% / 190px auto;'}
          -if course.started
            %a{'href': '/admin/client-admin/#{client.id}/courses/#{course.id}'}
              .label-11
                = course.name
          -else
            .label-12
              = course.name
          .course-stats
            .course-stat-label
              = _("Course run:")
              %span.course-stat-value
                = course.date_range
            .course-stat-label
              = _("Participants:")
              %span.course-stat-value
                = course.metrics.users_enrolled
            .course-stat-label
              = _("Started:")
              %span.course-stat-value
                = course.metrics.users_started
            .course-stat-label
              = _("Completed:")
              %span.course-stat-value
                = course.metrics.users_completed
            .course-stat-label
              = _("% Completed:")
              %span.course-stat-value
                = course.metrics.percent_completed
          .go-to-link
            -if course.started
              %a.course-link{'href': '/admin/client-admin/#{client.id}/courses/#{course.id}'}
                %i.fa.fa-chevron-right
             -else
              %a.course-link.not-started
                %i.fa.fa-chevron-right

  - block change_company_image
    #edit-company-image-modal.reveal-modal.medium{'data-reveal': 'true'}

- block js_snippets
  %script{src: "{% static 'js/vendor/cropper.min.js' %}"}
  %script{src: "{% static 'js/vendor/jquery.form.js' %}"}
  %script{src: "{% static 'js/image_editor.js' %}"}
  %script{src: "{% static 'js/client_admin_image_edit.js' %}"}
