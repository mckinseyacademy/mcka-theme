@import 'lms/static/sass/discussion/lms-discussion-bootstrap';
@import '../base/variables';
@import '../base/buttons';
@import '../discussion/partials/discussion-mobile-forum-content';


body {
	background-color: $mckinsey-academy-bright-gray;
}

footer[role=contentinfo] {
	nav {
		ul {
			li {
				a {
					color: $mckinsey-academy-alt-blue;
				}
			}
		}
	}
}

h1, h2, h3, h4, h5, h6 {
	line-height: 1.5;
}

.dropdown-menu {
	min-width: 176px;
	.sub-nav li a {
		color: var(--primary);
	}
}

//disable selection of hidden transparent texts
@mixin disableTextSelection {
	-webkit-touch-callout: none;
	/* iOS Safari */
	-webkit-user-select: none;
	/* Safari */
	-khtml-user-select: none;
	/* Konqueror HTML */
	-moz-user-select: none;
	/* Firefox */
	-ms-user-select: none;
	/* Internet Explorer/Edge */
	user-select: none;
	/* Non-prefixed version, currently  supported by Chrome and Opera */
}

@mixin moreButtonOfPostOrComment() {
	.actions-item {
		margin: 0 5px 0;
		float: left;
		>button {
			padding: 1px;
		}
		>.more-wrapper {
			>button {
				padding: 1px;
			}
		}
		.display-vote .vote-count {
			display: inline-block;
			font-size: 12px;
			padding: 9px 0 0;
		}

		.action-button {

			&.btn-link:hover,
			&.btn-link:focus {
				border-color: $hard-gray;
				background-color: transparent !important;
				background: none;

				.icon {
					@include primary-theme-content-color( !important);
				}
			}
		}
	}

	.actions-item:last-child {
		.more-wrapper {
			button.btn-link .icon {
				@include primary-theme-content-color;
			}
		}
	}

	.actions-dropdown-list {
		display: inline-block;

		li {
			width: 90%;
		}

		.btn-link {
			color: black;
			font-weight: normal;
			font-size: 12px;
			padding: 1px;
			&:hover,
			&:focus {
				border-color: transparent;
				background-color: transparent !important;
				background: none;
			}

			.icon {
				color: $gray;
			}

			&.is-checked {
				&.action-pin {
					@include primary-theme-content-color;
				}
			}

			&:hover {
				.icon {
					@include primary-theme-content-color;
				}
			}
		}

	}
}

@mixin usernameStyle() {
	color: $black;
	font-weight: 600;
	pointer-events: none;
	font-size: 12px;
	display: inline-block;
}

body.new-theme {
	background-color: $ash-white;
	//sync row with UI Refresh.
	-webkit-font-smoothing: unset;
	-moz-osx-font-smoothing: unset;

	.dropdown-toggle {
		&:after {
		width: auto;
		height: auto;
		margin-left: 0;
		vertical-align: middle;
		content: "\e313";
		border-top: 0;
		border-right: 0;
		border-bottom: 0;
		border-left: 0;
		}
	}

	.wmd-button-row {
		.wmd-button {
			position: absolute;
			margin: 0;
		}
		.wmd-spacer {
			position: absolute;
		}
	}
	button {
		border-width: 0;
	}
	.dropdown-menu {
        font-size: 0.75rem;
    }
	.row {
		display: flex;
		flex-wrap: wrap;
		margin-right: -15px;
		margin-left: -15px;
		max-width: none;
		width: auto;
	}

	//https://edx-wiki.atlassian.net/browse/MCKIN-10319 as per discussion with team overriding css here
	#pnProductNavContents {
		ul {
			li {
				margin-bottom: 0;
			}
		}
	}

	//sync up with ui-refresh
	.dropdown-menu {
		.content {
			width: unset;
			padding: 0;
			display: unset;
		}
	}



	@-webkit-keyframes fa-spin {
		0% {
			-webkit-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(359deg);
			transform: rotate(359deg);
		}
	}

	@keyframes fa-spin {
		0% {
			-webkit-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(359deg);
			transform: rotate(359deg);
		}
	}

	.wmd-panel {

		.wmd-button {
			span {
				background-image: url(/static/image/lesson-content/discussion/wmd-buttons-transparent.png);
			}
		}

		.wmd-preview-container {
			margin-top: -8px;

			.wmd-preview-label {
				font-size: 1rem;
				padding: 7px 10px;
				color: $black;
				border-top: 1px solid $hard-gray;
			}

			.wmd-preview {
				padding: 0px 20px;
			}
		}
	}
	.forum-new-post-form,
	.edit-post-form {
		h3 {
			font-size: 16px;
		}
	}
	/* desktop only  */
	@media (min-width: 767px) {

		.discussion-body {
			display: block;
			flex-direction: unset;
			position: relative;
			.forum-nav {
				padding-top: 20px;
			}
			.discussion-column {
				float: right;
			}
		}

		#course-discussion .discussion-content .discussion-body {
			padding-bottom: 50px;
		}


		.discussion-column {
			width: calc(100% - 390px) !important;
			border: 1px solid #EEEEEE;
			min-height: 550px;
			margin-left: 30px !important;

			@media (max-width: 1024px) {
				width: calc(100% - 265px) !important;
				margin-left: 15px !important;
			}

			@media (max-width: 768px) {
				width: 100% !important;
				margin-left: 0 !important;
			}
		}

		.thread-main-wrapper {
			border-bottom: 1px solid #EBEBEB;
		}

		.forum-new-post-form,
		.edit-post-form {
			h3 {
				font-size: 16px;
			}
			.post-field {
				margin-bottom: 34px;
				.field-input {
					.post-topic {
						min-width: 370px;
					}

					&.js-post-title,
					&.edit-post-title {
						min-width: 410px;
					}
				}

			}

			.edit-comment-body {
				width: 100%;
			}
		}
	}

	@media (max-width: 768px) {
		.forum-nav {
			position: static !important;
		}
	}

	/* mobile */
	@media (max-width: 767px) {
		.row>.col {
			padding: 0 10px;
		}
		#course-discussion {
			padding: 0;

			.contentCard {
				padding: 0px
			}

			.wmd-panel {
				.wmd-preview-container {
					.wmd-preview-label {
						font-size: 12px !important;
					}

					.wmd-preview {
						padding: 0px 20px;
						font-size: 12px;
					}
				}

				.wmd-button-row{
					margin:0;
					.wmd-button{
						position: static;
						margin: 0 2px;
					}
					.wmd-spacer{
						position: static;
						margin-left:7px;
						margin-right: 7px;
					}
				}
			}

			.post-cancel {
				margin-top: 10px !important;
			}

			.discussion-content {
				.discussion-column {
					min-height: unset; ///remove spacing between content and footer in mobiles

				}

				#discussion-container {

					#main.discussion-column .discussion-article.view-discussion-home,
					.ask-ta {
						padding-left: 0;
					}

					.page-content {
						padding: 0;
						padding-top: 68px;
					}

					.page-header {
						.page-header-main {

							left: 0px;
							top: 26px;
						}

						.page-header-secondary {
							width: 100%;
							position: relative;
							top: 65px;
							margin-left: 0;
							margin-right: 0;

							h1 {
								top: -75px;
							}

							.forum-actions {
								width: auto;

								button {
									@include primary-button ( !important);
									color: transparent !important;
									min-width: 100%;
									width: 40px;
									height: 40px !important;
									padding: 0 !important;
									position: relative;
									top: 1px;
									@include disableTextSelection();

									&:before {
										font-size: 1.875rem;
										color: $white;
										font-family: "Material Icons";
										content: "\e145";
										position: absolute;
										right: 5px;
    									top: -7px;
									}
								}
							}

							.forum-search {
								// width: 78% !important;
								margin-top: 1px;
								max-width: unset;
								margin-left: 2px;

								.search-button {
									&:after {
										top: 2px;
										right: 5px;
									}
								}

								.search-input {
									font-size: 12px;
									padding: 0px 1% 0px 3%;
									height: 38px !important;
									width: calc(100% - 20px) !important;
								}

								&:after {
									top: 13px;
									right: 13px;
								}
							}
						}
					}

					.forum-nav {
						margin-bottom: 10px;
						height: auto !important;
						max-height: none !important;
						position: static !important;
						min-height: 300px !important;
						padding: 15px !important;
						margin-top: 10px;

						.forum-nav-browse-menu-wrapper {
							border: 0;
							padding: 0;
							height: auto;
						}

						.forum-nav-thread-list {
							height: auto !important;
						}
					}

					.forum-nav-browse-menu {
						height: auto !important;

						.forum-nav-browse-menu-item {
							.forum-nav-browse-title {
								font-weight: normal;
							}
						}
					}

					.edit-post-form {
						padding-top: 0 !important;

						.field-input-label {
							top: 0 !important;
						}
					}

					.forum-new-post-form,
					.edit-post-form {
						min-width: auto;
						padding: 30px 0 30px;


						.thread-title {
							display: block;
							font-size: 1.25rem;
						}

						.field-help,
						.forum-new-post-form-wrapper>.post-field .field-label-text,
						.group-selector-wrapper .field-label-text {
							display: none;
						}

						.post-field {
							margin-bottom: 10px;

							.field-label {
								margin-bottom: 15px;
								display: block;
							}

							.field-label-text {
								color: $gray;
								font-size: 12px;
								position: absolute;
								top: 12px;
								margin: 0;
								left: 10px;
							}

							.post-topic {
								width: 100% !important;
								font-size: 12px;
								color: $gray;
							}

							.js-post-title {
								padding: 4px 5px 0 40px !important;
								width: 100% !important;
								color: $gray;
								font-size: 12px;
							}

							.field-input-label {
								padding: 0px !important;
								font-size: 0.875rem;
							}
						}

						.field-label-text {
							color: $gray;
							font-size: 12px;

							&:before {
								font-size: 13px;
							}
						}

						button.btn-brand {
							@include primary-button( !important);

							&:hover,
							&:active {
								@include primary-button-hover ( !important);
							}
						}

						.post-options {
							margin-bottom: 15px !important;

							label {
								margin-bottom: 5px;

								.input-checkbox {
									width: 20px !important;
								}
							}

						}

						button.cancel,
						button.post-cancel {
							@include secondary-button ( !important);

							&:hover {
								@include secondary-button-hover ( !important);
							}
						}
					}

					.edit-post-form {
						min-width: auto !important;

						.forum-edit-post-form-wrapper {
							.post-field {
								margin-bottom: 20px;

								.field-label {
									.field-label-text {
										display: none;
									}

									.field-help {
										display: none;
									}

									.post-type-label {
										.fa {
											display: none;
										}
									}
								}
							}
						}

						.post-field {
							.field-label {
								position: relative;
								margin-bottom: 10px;

								.field-label-text {
									color: $gray;
									font-size: 12px;
									position: absolute;
									top: 15px;
									margin: 0;
									left: 2px;
								}

								.field-help {
									display: none;
								}

								.edit-post-title {
									padding: 0px 5px 0 40px !important;
									width: 100% !important;
									color: $gray;
								}
							}

						}
					}

					.discussion-post {
						.post-header-actions {
							top: 65px;

							.btn-link {
								border: 0;

								&.action-button:hover {
									border: 1px solid $hard-gray;
								}
							}

							.action-icon {
								background: none
							}
						}

						.post-header-content {


							.posted-details {
								font-size: 12px;
								color: $gray;
								margin: 0;
								font-weight: normal;

								.username {
									@include usernameStyle();
								}

								.user-label-staff {
									width: auto;
									font-weight: normal;

									&:before {
										color: $white;
										background: $gray;
										font-size: 0.625rem;
										padding: 0px 2px;
										line-height: normal;
										width: auto;
									}
								}
							}

						}

						.post-body {
							max-width: 100%;
						}
					}

					.forum-content {
						@include forum-content-mobile;
					}
				}
			}
		}
	}

	/* desktop && mobile */
	#course-discussion {
		background: $white;
		position: relative;
		z-index: 9999;
		padding: 0;
		word-break: break-word;

		::placeholder {
			/* Chrome, Firefox, Opera, Safari 10.1+ */
			color: $hard-gray;
			opacity: 1;
			/* Firefox */
		}

		:-ms-input-placeholder {
			/* Internet Explorer 10-11 */
			color: $hard-gray;
		}

		::-ms-input-placeholder {
			/* Microsoft Edge */
			color: $hard-gray;
		}

		.row {
			margin-right: 0;
			margin-left: 0;
			@media (max-width: 767px) {
				.col {
					padding-left: 0;
					padding-right: 0;
				}
			}
		}

		.post-errors {
			margin: 0 auto;

			.alert-error {
				padding: 10px;
				border: 1px solid $bg-white-red;
				box-shadow: none;

				.alert-icon {
					background: none;
					color: $bg-white-red;
				}

				.alert-message {
					display: inline-block;
					padding: 0;

					.alert-copy {
						color: $bg-white-red;
						font-size: 1rem;
					}
				}
			}
		}

		#contact-ta {
			.modal-dialog {
				.modal-content {
					padding: 20px;

					.modal-header {
						border: 0 !important;
						padding-bottom: 0;
						padding-left: 8px;

						.close {
							font-weight: normal;
							outline: none;

							&:hover {
								color: currentColor;
							}
						}

						.modal-title {
							color: $black;
							font-size: 1.5rem;
						}
					}

					.modal-body {
						padding: 3px 10px 10px;

						div:first-child {
							color: $gray;
							font-size: 12px;
							padding-bottom: 20px;
						}

						form {
							textarea {
								border: 1px solid $hard-gray;
								width: 100%;
								margin-bottom: 15px;
								padding: 10px;
								font-size: 0.875rem;
								outline: none;
							}

							.button {
								@include primary-button;

								&:not([disabled]) {

									&:hover,
									&:active {
										@include primary-button-hover;
									}

								}

								&:disabled {
									background-color: $gray !important;
									color: $light-gray;
									cursor: default;
								}
							}
						}
					}

					.modal-footer {
						display: none;
					}
				}
			}
		}

		.edit-post-form {

			.post-cancel,
			.post-update {
				margin-top: 10px !important;
				margin-left: 0 !important;
			}

			.loading-animation {
				display: none;
			}
		}

		.discussion-content {
			padding: 24px 30px 10px;

			.discussion,
			.col {
				padding: 0;
				padding-left: 0 !important;
				padding-right: 0 !important;
				position: relative;
				border: none;
			}

			.discussion-body {
				max-width: 100%;
			}

			.page-content {
				padding: 0;
				padding-top: 50px;
			}

			.post-label {
				color: $gray;

				&.post-label-pinned {
					color: $gray;
				}
			}

			select,
			input[type="text"],
			input[type="search"] {
				border-radius: 0px !important;
				-webkit-appearance: none !important;
				-moz-appearance: none;
				-ms-appearance: none;
				-o-appearance: none;
				appearance: none;
				box-shadow: none;
				border: 1px solid $hard-gray;
			}

			select::-ms-expand {
				display: none;
			}

			button.btn:not(.cancel):not(.post-cancel):not(.add-post-cancel):not(.new-post-btn):not(.search-button),
			button.btn-brand {
				@include primary-button;

				&:hover,
				&:active {
					@include primary-button-hover( !important);
				}
			}

			button {
				&.btn-link {
					.action-label {
						padding: 3px 5px 0;
						color: $black;
					}

					.action-icon {
						border: 0;
						background: none;

						.icon {
							top: 0;
						}

						&:before {
							font-size: 1.125rem;
							color: $gray;
							font-family: "Material Icons";
						}
					}

					&:hover {
						.action-icon {
							background: none;
							border: 0;
						}
					}

					.icon {
						color: $gray;
					}

					&.is-checked {
						.icon {
							@include primary-theme-content-color;
						}

						.label-checked {
							@include primary-theme-content-color;
						}
					}
				}
			}

			button.submit:hover,
			button.submit:focus {
				@include primary-button-hover;
			}

			button.cancel,
			button.post-cancel {
				@include secondary-button( !important);
			}

			button.post-cancel:hover,
			button.post-cancel:focus {
				@include secondary-button-hover;
			}


			.icon {
				font-family: "Material Icons";
				font-size: 1.125rem;
				@include primary-theme-content-color;

				&.fa-spinner {
					&:before {
						content: '\e5d5';
						-webkit-animation: fa-spin 2s infinite linear;
						animation: fa-spin 2s infinite linear;
					}
				}

				&.fa-check-square-o {
					&:before {
						content: "\e834";
					}
				}

				&.fa-caret-down {
					&:before {
						content: "\e313";
					}
				}

				&.fa-plus {
					&:before {
						content: "\e8dc"
					}
				}

				&.fa-star {
					&:before {
						content: "\e838"
					}
				}

				&.fa-ellipsis-h {
					&:before {
						content: "\e5d3"
					}
				}

				&.fa-star {
					&:before {
						content: "\e838";
					}
				}

				&.fa-search,
				&.fa-filter {
					&:before {
						content: "\e8b6";
						color: $gray;
					}
				}



				&.fa-reorder {
					&:before {
						content: "\e8fe";
					}
				}

				&.fa-sort {
					&:before {
						content: "\e313";
					}
				}

				&.fa-flag {
					&:before {
						content: "\e160";
					}
				}

				&.fa-comments {
					&:before {
						content: "\e8af";
					}
				}

				&.fa-question {
					&:before {
						content: "\e887";
					}
				}

				&.fa-user {
					&:before {
						content: "\e7fd";
					}
				}

				&.fa-thumb-tack {
					&:before {
						content: "\e892";
					}
				}

				&.fa-pencil {
					&:before {
						content: "\e3c9";
					}
				}

				&.fa-remove {
					&:before {
						content: "\e14c";
					}
				}

				&.fa-lock {
					&:before {
						content: "\e897";
					}
				}

				&.fa-warning {
					&:before {
						content: "\e644";
					}
				}

				&.fa-check {
					&:before {
						content: "\e5ca";
					}
				}

				&.fa-check-square-o {
					:before {
						content: "\e834";
					}
				}
			}

			.forum-nav-browse-menu,
			.discussion-column,
			.forum-nav-thread-list {
				.icon {
					position: relative;
					top: 4px;
				}
			}

			.discussion-column {
				margin: 0;
			}



			.breadcrumbs {
				.btn-link {
					background: none;
					font-size: 12px;
					color: $gray;
					font-weight: normal;
					padding: 1px;
					border: 1px solid transparent;
					font-family: "Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;

					&:hover {
						background: none !important;
						border-color: transparent !important;
						background-color: transparent !important;
					}
				}

				.nav-item {
					font-size: 12px;
					font-weight: normal;
					color: $gray;
					margin-left: 0;

					&:not(:only-child):first-child {
						.btn-link {
							@include primary-theme-content-color;

							&:hover {
								text-decoration: underline;
								@include primary-theme-content-color-hover;
							}
						}
					}
				}

				.fa-bars {
					display: none;
				}

				.fa-angle-right {
					&:before {
						content: "/";
					}
				}
			}

			.page-header {
				width: 100%;
				text-align: right;
				border: 0;
				padding: 0;
				div {
					display: inline-block;
					vertical-align: top;
				}

				.page-header-main {
					position: absolute;
					top: 35px;
					width: 45%;
					left: 0;
					text-align: left;
					z-index: 0;
					height: 19px;
					padding: 0;
					line-height: 0;
				}

				.page-header-secondary {
					width: 100%;
					margin: 0;

					h1 {

						font-size: 1.75rem;
						font-weight: 300;
						color: $black;
						float: left;
						margin-bottom: 1.25rem;
					}

					.new-post-btn {
						margin-top: 0px;
						transition: .35s;
						@include primary-button-large;
						box-shadow: inset 0 0 0 60px rgba(0, 0, 0, 0);

						&:hover {
							box-shadow: inset 0 0 0 60px rgba(0, 0, 0, 0.2) !important;
						}
					}
				}

				.forum-search {
					width: 40%;
					margin-left: 8px;
					border: 1px solid #979797;
					position: relative;

					.search-input {
						width: calc(100% - 50px);
						padding: 13px;
						position: relative;
						max-width: none;
						height: auto;
						box-sizing: border-box;
						display: block;
						border: 0;
						line-height: normal;
					}
					.field-label {
						position: fixed;
						left: -9999px;
					}
					.search-button {
						position: absolute;
						top: 0;
						right: 0;
						width: 50px;
						background-color: transparent !important;
						overflow: hidden;
						height: 50px !important;
						color: transparent !important;
						border: 0;
						@include disableTextSelection();

						&:after {
							font-family: "Material Icons";
							position: absolute;
							top: 5px;
							right: 15px;
							content: "\e8b6";
							color: $gray;
							font-size: 1.25rem;
						}

						&:focus {
							box-shadow: none;
						}
					}
				}
			}

			.forum-nav {
				margin: 0;
				border: 0;
				background: $white;
				padding: 0;
				margin-bottom: 20px;
				position: absolute;


				.ask-ta {
					background: none !important;

					.group-member {
						padding: 10px 0;
						border-bottom: 1px solid $gray-border;
						margin-bottom: 10px;

						.avatar {
							border-radius: 30px;
							width: 60px !important;
							height: 60px !important;
							margin: 0;
							display: inline-block;
						}

						.person-info {
							margin-left: 10px;
							display: inline-block;
							position: relative;
							top: 10px;

							.person-username {
								font-weight: bold;
							}

							.email-member {
								@include primary-theme-content-color;
								text-transform: lowercase;
								font-size: 12px;
								background: none;
								border: 0;
								padding: 0;

								&:hover {
									text-decoration: underline;
									@include primary-theme-content-color-hover();
								}
							}
						}
					}
				}

				.forum-nav-browse-menu-wrapper {
					background: none;
					border: 0;
					height: 400px;
					padding-top: 20px;

					.forum-nav-browse-filter {
						padding: 0;
						margin-bottom: 10px;
						.field-label-text {
							position: fixed;
							left: -9999px;
						}
						.icon {
							margin-top: -9px;
							top: 50%;
						}

						label {
							width: 100%;

							#forum-nav-browse-filter-input {
								font-size: 1rem !important;
								padding: 10px 10px;
								text-transform: capitalize;
								width: 100%;
								max-width: none;
							}
						}
					}

					.forum-nav-browse-menu {
						.icon {
							top: 13px !important;
							left: 0;
							@include primary-theme-content-color;
						}

						.forum-nav-browse-menu-item {
							border-bottom: 1px solid $gray-border;

							ul.forum-nav-browse-submenu {
								border-top: 1px solid $gray-border;
							}

							.icon {
								top: 16px;
							}

							.forum-nav-browse-title {
								font-size: 1rem;
								@include primary-theme-content-color;
								border-bottom: 0;
								padding: 10px 0;

								&:hover {
									text-decoration: underline;
									@include primary-theme-content-color-hover();
								}

								&:active,
								&:hover {
									background: none !important;
								}
							}

							.forum-nav-browse-submenu {
								.forum-nav-browse-menu-item:last-child {
									border-bottom: 0;
								}

								.forum-nav-browse-title {
									font-size: 12px;
									color: $gray;
									padding: 5px 0;
								}
							}
						}
					}
				}
			}

			.forum-new-post-form,
			.edit-post-form {
				padding: 31px;
				min-width: 425px;

				.edit-post-body {
					width: 100%
				}



				.thread-title {

					font-size: 1.5rem;
					font-weight: 400;

					color: $black;
				}

				button.btn-brand {
					@include primary-button;

					&:hover,
					&:active {
						@include primary-button-hover;
					}
				}

				button.cancel {
					@include secondary-button;

					&:hover,
					&:active {
						@include secondary-button-hover;
					}
				}

				.field-label-text {
					font-size: 1rem;
					font-weight: normal !important;
					color: $black;
				}


				.post-field {

					// Radio button

					.post-type-label {
						margin-right: 0;
						margin-left: 0;
						width: 100%;
						display: inline-block;
						vertical-align: top;
						position: relative;
						overflow: visible;
						min-height: 16px;
						margin-top: 2px;
						font-size: 16px;

						.input-radio {
							display: block;
							position: absolute;
							opacity: 0;
						}
						.input-radio:checked+.field-input-label:before {
							content: '\e837';
						}
						.input-radio+.field-input-label:before {
							font-family: 'Material Icons';
							content: '\e836';
							box-sizing: border-box;
							display: inline-block;
							width: 18px;
							height: 18px;
							position: absolute;
							font-size: 18px;
							line-height: normal;
							color: #000;
							position: absolute;
							left: -30px;
							top: 3px;
						}
						.field-input-label {
							@include primary-theme-content-color( !important);
							position: absolute;
							top: -2px;
							left: 30px;

							&:hover {
								@include primary-theme-content-color-hover( !important);
							}

							.icon {
								&:before {
									@include primary-theme-content-color( !important);
								}
							}
						}
						&:before {
							display: none;
						}
					}

					.field-label {
						position: relative;
						margin-bottom: 0;
						display: block;

						.field-label-text {
							margin-bottom: 8px;
							font-size: 16px;
							line-height: 16px;
						}
					}

					.field-help {
						// color: transparent;
						// visibility: hidden;
						@include disableTextSelection();

						&#field_help_topic_area {

							position: absolute;
							top: 64px;
						}

						&#field_help_title {

							position: absolute;
							top: 64px;
						}
					}



					.field-input {
						width: 100%;

						.post-topic {
							width: 55% !important;
							background-image: url('/static/mcka-theme/images/expand-button.svg');
							-webkit-appearance: none !important;
							-moz-appearance: none;
							-ms-appearance: none;
							-o-appearance: none;
							appearance: none;
							padding: 0 10px;
							border: 1px solid $hard-gray !important;
							background-repeat: no-repeat;
							background-position: 95%;
							background-size: 12px;
							color: $gray;
							font-size: 1rem;

							&::-ms-expand {
								display: none;
							}
						}
					}

					#field_help_post_type {
						margin-top: 0;
					}

				}

				#new-post-editor-description {
					margin-top: 15px;
					display: inline-block;
				}



				.js-post-title,
				.edit-post-title {
					max-width: none;
					width: 55% !important;
					color: $gray;
				}



				button {
					&.submit {
						float: left;
						margin: 0 10px 0 0;

						&:hover {
							float: left;
						}
					}

					&.cancel {
						@include secondary-button;

						&:hover {
							@include secondary-button-hover;
						}
					}
				}

				.post-options {
					.field-label {
						width: 100%;
						color: $black;
						text-transform: capitalize;
						padding: 0 30px;
						margin: 0;
						height: 18px;
						overflow: visible;
						&:nth-child(2) {
							.field-input-label {
								top: 2px;
							}
						}

						.field-input-label {
							font-size: 0.875rem;
							position: absolute;
							top: -4px;

							.icon {
								&::before {
									color: $black;
								}
							}
						}


						

						.field-input:checked+.field-input-label {
							color: $black;

							.icon {
								&::before {
									@include primary-theme-content-color;
								}
							}
						}
					}
				}
			}

			.discussion-thread-list-container {
				height: calc(100% - 140px);

				.forum-nav-thread-list-wrapper {
					height: 100%;
				}

				.forum-nav-refine-bar {
					background: none;
					margin: 0 auto 15px;
					padding: 15px 0 0;
					border: 0;
					width: 100%;

					select {
						color: $gray;
						border: 0;
						width: 100%;
						background-image: url('/static/mcka-theme/images/expand-button.svg');
						background-repeat: no-repeat;
						background-position: 90%;
						background-size: 8px;
						width: 100%;
						line-height: 32px;
						height: 32px;
						padding: 0 25px 0 10px;
					}

					label {
						width: 100%;
						background: $white;
						border: 1px solid #dcdbdb;
						margin-bottom: 2px;

						.forum-nav-filter-cohort-control{
							max-width: 100% !important;
						}
					}
				}

				.forum-nav-thread-list {
					background: $white;
					border: 1px solid $border_color_1;
					height: calc(100% - 103px) !important;

					.forum-nav-load-more {
						background-color: #FFFFFF;
						padding: 10px;

						.forum-nav-load-more-link {
							@include secondary-button;
							width: 100%;
							margin: 0 auto;

							&:hover,
							&:active {
								@include secondary-button-hover;
								text-decoration: none;
							}
						}
					}

					.forum-nav-thread {
						border: 0;
						background: none;
						padding: 0;


						.forum-nav-thread-wrapper-1 {
							width: calc(100% - 75px);
							max-width: calc(100% - 75px);
						}

						.forum-nav-thread-wrapper-2 {
							align-self: flex-start;
							min-width: 40px;
						}

						.forum-nav-thread-link {
							border-left: 0;
							//background-color: $ash-white;
							border-bottom: 1.21px solid $ash-white;
							padding: 14px 10px !important;
							transition: .35s;

							&:hover .forum-nav-thread-title {
								text-decoration: underline;
								color: var(--primary);
								text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.3);
							}

							.icon {
								color: var(--primary);
							}

							&.is-active {
								background-color: $sky-blue !important;

								.forum-nav-thread-title,
								.icon {
									color: var(--primary);
								}

								&:hover .forum-nav-thread-title {
									text-decoration: underline;
									@include primary-theme-content-color-hover();
								}
							}

							.forum-nav-thread-title {
								font-size: 1rem;
								color: var(--primary);
								line-height: 22px;
								font-weight: 400;
							}

							.forum-nav-thread-comments-count {
								display: inline-block !important;
								background-color: $gray;
								color: $white;
								font-size: 0.625rem;
								padding: 0px 2px;

								&:after {
									border-width: 0;
									bottom: -3px;
									left: 0px;
									border-top: 0px solid transparent;
									border-bottom: 5px solid transparent;
									border-left: 5px solid $gray;
								}
							}

							.posted-details,
							.thread-preview-body,
							.post-context,
							.forum-nav-thread-votes-count {
								display: none !important;
							}
						}

						&.never-read {
							.forum-nav-thread-link {
								border-left: 4px solid;
								@include primary-theme-content-color;
								background-color: transparent;

								.icon {
									@include primary-theme-content-color;
								}

								.forum-nav-thread-title {
									color: var(--primary);
								}
							}

							&:hover .forum-nav-thread-title {
								text-decoration: underline;
								@include primary-theme-content-color-hover();
							}
						}
					}
				}
			}

			.forum-content {
				padding-top: 20px;


				.discussion-article {
					padding: 0 20px;
				}

				.home-header {
					border: 0;

					.label {
						color: transparent;
						@include disableTextSelection();

						&:before {
							color: $black;
							font-weight: normal;
							font-size: 1.5rem;
							content: 'Discussion';
							position: absolute;
							display: block;
						}


					}

					.home-title {
						display: none;
					}
				}

				.label {
					&.label-settings {
						color: transparent;
						@include disableTextSelection();

						&:before {
							content: 'How to use discussions:';
							font-size: 0.875rem;
							color: black;
							position: absolute;
							display: block;
						}

					}
				}

				.home-helpgrid {
					box-shadow: none;
					border: 1px solid $light-gray;

					.helpgrid-row {
						border-bottom: 1px solid $light-gray;

						.row-title {
							background-color: transparent;
							font-size: 0.875rem;
							font-weight: bold;
						}

						.row-item {
							border: 1px solid $light-gray;

							.icon {
								width: 100%;
								text-align: center;
								display: inline-block;
								padding: 0;

								&::before {
									color: var(--primary);
								}
							}

							.row-description {
								display: block;
								text-transform: lowercase;
								text-align: center;
								padding-top: 10px;
							}
						}

						&.helpgrid-row-participation {
							background: #f9f9f9;
						}
					}

					.helpgrid-row-notification {
						.row-item-full {
							border: 1px solid #eee;

							&:before {
								content: "You can enable daily\0020(or weekly) notification digests which show discussion activity by accessing your profile dropdown.";
							}

							label,
							.row-description {
								display: none;
							}
						}

					}
				}

				.thread-wrapper {
					.thread-main-wrapper {
						box-shadow: none !important;
						padding-bottom: 15px;

						.discussion-post {
							padding: 0;

							.post-header {
								border: 0;

								.post-title {
									color: $black;
									font-size: 1.5rem;
									font-weight: normal;
								}

								.posted-details {
									font-size: 12px;
									color: $gray;
									margin: 0;
									font-weight: normal;

									.username {
										@include usernameStyle();
									}

									.user-label-staff {
										width: auto;
										font-weight: normal;
										line-height: normal;

										&:before {
											color: $white;
											background: $gray;
											font-size: 0.5625rem;
											padding: 0px 2px;
											width: auto;
										}
									}
								}

								.post-actions-list {
									@include moreButtonOfPostOrComment();
								}
							}

							.post-body {
								p {
									font-size: 1rem;
									color: $black;
								}
							}

							.post-context {
								.related-to-label {
									display: none;
								}

								.group-visibility-label {
									color: $gray;
									font-size: 12px;
									font-style: italic;
								}
							}
						}
					}

					.post-extended-content {
						.response-btn-count-wrapper {

							.response-count {
								display: none;
							}
						}

						.response-pagination {
							display: none;
						}

						.js-response-list,
						.js-marked-answer-list {
							padding: 0;

							.forum-response {
								border: 0;
								margin-top: 20px;

								.discussion-response {
									.form-row {
										margin-bottom: 20px;
									}

									button[type="submit"] {
										margin-right: 10px !important;
									}

									background-color: #f9f9f9;

									.response-header {
										background: none;
										border: 0;

										.response-header-actions {
											right: 10px;
										}
									}

									.response-header-content {
										.username {
											@include usernameStyle();
										}

										.posted-details {
											font-weight: normal;
										}

										.user-label-staff {
											width: auto;
											font-weight: normal;

											&:before {
												color: $white;
												background: $gray;
												font-size: 0.625rem;
												padding: 1px 2px;
												width: auto;
											}
										}
									}

									.response-actions-list {
										@include moreButtonOfPostOrComment();
									}

									.btn-brand {
										@include primary-button;

										&:hover,
										&:active {
											@include primary-button-hover;
										}
									}

									.post-cancel {
										@include secondary-button;

										&:hover,
										&:active {
											@include secondary-button-hover;
										}
									}
								}

								.action-show-comments {
									@include primary-theme-content-color;
									text-decoration: none;
									font-size: 0.875rem;
									font-weight: normal;

									.fa-caret-down::before {
										@include primary-theme-content-color;
										font-size: 1.25rem;
										vertical-align: text-top;
									}
								}

								.comments {
									background-color: #f9f9f9;
									box-shadow: none;

									forum-new-post-form .edit-post-form,
									.new-comment {
										border-top: 1.21px solid #EBEBEB;

										.wmd-preview-label {
											font-size: 1rem;
											padding: 7px 10px;
										}

										.wmd-input {
											min-height: 80px;
										}

										.btn-brand {
											@include primary-button;

											&:hover,
											&:active {
												@include primary-button-hover;
											}
										}

										.post-cancel {
											@include secondary-button;

											&:hover,
											&:active {
												@include secondary-button-hover;
											}
										}
									}

									.posted-details {
										font-size: 12px;
										color: $gray;
										margin: 0;
										font-weight: normal;

										.username {
											@include usernameStyle();
										}

										.user-label-staff {
											width: auto;
											font-weight: normal;

											&:before {
												color: $white;
												background: $gray;
												font-size: 0.625rem;
												padding: 0px 2px;
												line-height: normal;
												width: auto;
											}
										}
									}

									.comment-actions-list {
										@include moreButtonOfPostOrComment();
									}

									
								}
							}
						}

						.discussion-reply-new {
							.add-response {
								display: block !important;
								padding: 0 0px;
								margin-top: 0px;
								font-size: 16px;
								margin: 0 0 30px;
							}
							.reply-body {
								.wmd-preview-container {
									.wmd-preview-label {
										font-size: 1rem;
										padding: 7px 10px;
									}
								}
							}

							.reply-post-control {
								margin-top: 15px;

								button {
									&.btn {
										float: left;
										margin: 0 10px 20px 0;

										&:hover {
											float: left;
											margin: 0 10px 20px 0;
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

	.wmd-prompt-background {
		z-index: 9999 !important;
	}

	.wmd-prompt-dialog {
		z-index: 9999 !important;
		margin-left: 0 !important;
		margin-right: 0 !important;
		margin-top: auto !important;
		left: 50%;
		transform: translate(-50%, -50%);
		bottom: auto;

		#new-url-input {
			direction: ltr !important;
		}


		.form-actions {
			#new-link-image-ok {
				@include primary-button;

				&:hover,
				&:active {
					@include primary-button-hover();
				}

			}

			#new-link-image-cancel {
				@include secondary-button;

				&:hover,
				&:active {
					@include secondary-button-hover();
				}
			}
		}
	}
}



// Layout
.new-theme {
	&.rtl {
		.wmd-prompt-dialog {
			#new-url-input {
				direction: rtl !important;
			}
		}
		.wmd-spacer1 {
			right: 50px;
			left: auto;
		}
		.wmd-spacer2 {
			right: 125px;
			left: auto;
		}
		.wmd-spacer3 {
			right: 250px;
			left: auto;
		}
		#course-discussion .discussion-content .forum-nav .forum-nav-browse-menu-wrapper .forum-nav-browse-filter .icon {
			left: auto;
			right: 11px;
			width: auto;
		}
		#course-discussion .discussion-content .forum-content .thread-wrapper .post-extended-content .js-response-list .forum-response .discussion-response .response-header .response-header-actions, 
		#course-discussion .discussion-content .forum-content .thread-wrapper .post-extended-content .js-marked-answer-list .forum-response .discussion-response .response-header .response-header-actions {
			left: auto !important;
			right: 0 !important;
		}
		.discussion-comment .comment-actions-list {
			left: auto !important;
			right: 0 !important;
		}
		[data-block-type="pb-mrq"] .choice-selector:before,
		[data-block-type="pb-mrq"] .field-label:before,
		.discussion-body .post-options .choice-selector:before,
		.discussion-module .post-options .choice-selector:before,
		.discussion-body .post-options .field-label:before,
		.discussion-module .post-options .field-label:before,
		[data-block-type="discussion"] .post-options .choice-selector:before,
		[data-block-type="discussion"] .post-options .field-label:before,
		[data-block-type="discussion-forum"] .post-options .choice-selector:before,
		[data-block-type="discussion-forum"] .post-options .field-label:before {
			right: auto;
			left: 0;
		}
		.forum-new-post-form .post-options .icon, .edit-post-form .post-options .icon {
			margin-left: 0;
		}
		.discussion .actions-dropdown {
			left: auto;
			right: 0;
			.actions-dropdown-list {
				&:before, &:after {
					left: auto;
					right: 6px;
				}
			}
		}
	}
	.view-discussion-home {
		display: block;
	}
	#course-discussion {

		// start new-theme discussion home page
		.forum-content {
			.view-discussion-home {
				padding: 0 45px !important;

				h1 {
					@include font-size(21);
					margin-bottom: 15px;
				}

				.sub-heading {
					@include font-size(14);
					font-weight: 600;
					margin: 0 0 20px;
					line-height: 1.5;
				}

				.discussion-wrapper {
					h4 {
						@include font-size(12);
						font-weight: bold;
						text-transform: uppercase;
						margin-bottom: 10px;

						&:nth-child(2) {
							margin-top: 20px;
						}
					}

					p {
						@include font-size(14);
						margin-bottom: 10px;
						line-height: normal;

						span {
							color: var(--primary);
						}

						&:nth-child(3) {
							&:before {
								content: '\e8b6';
								font-family: 'Material Icons';
								font-size: 18px;
								position: relative;
								top: 4px;
								display: inline-block;
								color: var(--primary);
								margin-right: 3px;
							}
						}
					}

					hr {
						margin: 30px 0;
					}

					.discussion-features {
						margin: 0 0 15px;
						padding: 0;
						list-style: none;

						li {
							@include font-size(14);
							margin-bottom: 5px;

							span.icon {
								margin-right: 5px;
								@include font-size(16);

								&.fa-flag {
									&:before {
										font-family: 'Material Icons';
										content: '\e153'
									}
								}
							}
						}
					}
				}
			}
		}

		// end new-theme discussion home page


		.forum-nav {

			width: 360px !important;
			box-sizing: border-box !important;
			padding: 0 30px !important;
			background: #F9F9F9 !important;
			margin-right: 0 !important;
			margin-left: 0 !important;
			margin-bottom: 0 !important;
			min-height: 550px;
			height: calc(100vh - 300px) !important;
			overflow: hidden;
			max-width: none;

			@media (max-width: 1024px) {
				width: 250px !important;
				padding: 0 15px !important;
			}

			@media (max-width: 768px) {
				width: 100% !important;
				padding: 0 15px !important;
				min-height: 500px !important;
				height: auto !important;
				position: static !important;

			}
		}
	}
	.forum-nav-browse-menu {
		max-height: calc(100% - 55px) !important;
	}
}


// Mobile View
.new-theme {

	@media (max-width: 767px) {
		.discussion-body {
			display: flex;
			flex-flow: column-reverse;
			.forum-nav {
				.forum-nav-browse-menu {
					max-height: none !important;
				}
			}
		}
		.view-discussion-home {
			display: none;
		}
		#course-discussion {
			.discussion-content {
				padding: 20px 0 !important;

				.page-header {
					width: calc(100% - 30px) !important;
					margin-left: 15px;
					margin-right: 15px;


					.page-header-secondary {
						top: -9px !important;

						h1 {
							font-size: 22px !important;
						}

						.form-actions {
							width: auto !important;

							.new-post-btn {
								width: 40px !important;

								&:before {
									left: 50% !important;
									transform: translateX(-48%) !important;
									top: -7px !important;
								}
							}
						}
					}



					.forum-search {
						width: 50% !important;
					}

					.page-header-main {
						left: 15px !important;
						width: calc(100% - 30px) !important;
					}
				}

				#discussion-container {
					.page-content {
						padding-top: 0 !important;
					}
				}

				.discussion-column {
					padding: 15px !important;
				}
			}

			.forum-nav {
				overflow: auto !important;
			}
		}

		header.post-header {
			height: auto !important;
		}

		header.page-header {
			height: auto !important;
			margin-bottom: 20px;
		}


		.add-response{
			padding:0;
		}
	
		.responses{
			margin-left:-15px;
			margin-right:-15px;
			
			.discussion-response{
				padding:15px;
			}
	
			.comments{
				>li{
					padding: 10px 15px;
				}
			}
		}
	}
}
