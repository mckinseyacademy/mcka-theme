machine:
  python:
    version: 2.7.12


general:
  artifacts:
    - "reports"

dependencies:
  override:
    - pip install -r requirements.txt --exists-action w

test:
  override:
    - pip install -r test-requirements.txt
    - python manage.py test --settings=mcka_apros.test_settings
    - coverage run --source='.' manage.py test --settings=mcka_apros.test_settings
    - coverage report
    - coverage xml
    - flake8 ./

  post:
    - cp reports/coverage.xml .
    - bash <(curl -s https://codecov.io/bash) -y codecov.yml
